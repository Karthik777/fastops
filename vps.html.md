# vps


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Cloud-init generation

[`vps_init()`](https://Karthik777.github.io/fastops/vps.html#vps_init)
builds a cloud-init YAML string for a fresh VPS. It delegates to
`fastcloudinit.cloud_init_config` which handles UFW (deny incoming,
allow 22/80/443), user creation, and SSH key setup. Pass `docker=True`
to install Docker via `get.docker.com`, and `cf_token` to install a
Cloudflare tunnel.

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L24"
target="_blank" style="float:right; font-size:smaller">source</a>

### vps_init

``` python

def vps_init(
    hostname, pub_keys, username:str='deploy', docker:bool=True, cf_token:NoneType=None, packages:NoneType=None,
    cmds:NoneType=None, kw:VAR_KEYWORD
):

```

*Cloud-init YAML for a fresh VPS: user, UFW, optional Docker +
Cloudflare tunnel*

``` python
yaml = vps_init('myserver', 'ssh-rsa AAAA...', docker=True)
assert '#cloud-config' in yaml
assert 'get.docker.com' in yaml
assert 'deploy' in yaml
print('vps_init OK')
print(yaml[:400])
```

## Hetzner (hcloud CLI)

[`callhcloud()`](https://Karthik777.github.io/fastops/vps.html#callhcloud)
and [`Hcloud`](https://Karthik777.github.io/fastops/vps.html#hcloud)
follow the same pattern as
[`calldocker()`](https://Karthik777.github.io/fastops/core.html#calldocker)/[`Docker`](https://Karthik777.github.io/fastops/core.html#docker)
and
[`callmultipass()`](https://Karthik777.github.io/fastops/multipass.html#callmultipass)/[`Multipass`](https://Karthik777.github.io/fastops/multipass.html#multipass)
— subprocess wrapper plus kwargs-to-flags dispatch.

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L46"
target="_blank" style="float:right; font-size:smaller">source</a>

### Hcloud

``` python

def Hcloud(
    args:VAR_POSITIONAL, kwargs:VAR_KEYWORD
):

```

*Wrap hcloud CLI: **getattr** dispatches subcommands, kwargs become
flags*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L42"
target="_blank" style="float:right; font-size:smaller">source</a>

### callhcloud

``` python

def callhcloud(
    args:VAR_POSITIONAL
):

```

*Run hcloud CLI command, return stdout.*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L53"
target="_blank" style="float:right; font-size:smaller">source</a>

### hcloud_auth

``` python

def hcloud_auth(
    token, name:str='default'
):

```

*Configure hcloud CLI with token. Call once before using
create/servers/etc.*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L85"
target="_blank" style="float:right; font-size:smaller">source</a>

### delete

``` python

def delete(
    name
):

```

*Delete a Hetzner server by name*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L103"
target="_blank" style="float:right; font-size:smaller">source</a>

### server_ip

``` python

def server_ip(
    name
)->str:

```

*Get public IPv4 of a Hetzner server*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L98"
target="_blank" style="float:right; font-size:smaller">source</a>

### servers

``` python

def servers(
    
):

```

*List Hetzner servers as \[{name, ip, status}\]*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L79"
target="_blank" style="float:right; font-size:smaller">source</a>

### create

``` python

def create(
    name, image:str='ubuntu-24.04', server_type:str='cx22', location:NoneType=None, cloud_init:NoneType=None,
    ssh_keys:NoneType=None
):

```

*Create a Hetzner server. cloud_init: YAML string or file path. Returns
IP.*

## SSH helpers

Pure subprocess-based SSH/rsync utilities — no paramiko dependency.
[`deploy()`](https://Karthik777.github.io/fastops/vps.html#deploy) syncs
a Compose stack to a remote host and brings it up.

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L130"
target="_blank" style="float:right; font-size:smaller">source</a>

### deploy

``` python

def deploy(
    compose, host, user:str='deploy', key:NoneType=None, path:str='/srv/app', pull:bool=False
):

```

*Sync Compose stack to remote host and run docker compose up -d. Returns
stdout.*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L124"
target="_blank" style="float:right; font-size:smaller">source</a>

### sync

``` python

def sync(
    src, dst_path, host, user:str='deploy', key:NoneType=None, port:int=22
):

```

*Rsync local path to remote host:dst_path*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/vps.py#L119"
target="_blank" style="float:right; font-size:smaller">source</a>

### run_ssh

``` python

def run_ssh(
    host, cmds:VAR_POSITIONAL, user:str='deploy', key:NoneType=None, port:int=22
):

```

*Run one or more commands on a remote host via SSH. Returns stdout.*
