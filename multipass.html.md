# multipass


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## CLI wrapper

[`callmultipass()`](https://Karthik777.github.io/fastops/multipass.html#callmultipass)
mirrors
[`calldocker()`](https://Karthik777.github.io/fastops/core.html#calldocker)
— runs the multipass CLI and returns stdout.
[`Multipass`](https://Karthik777.github.io/fastops/multipass.html#multipass)
uses the same kwargs-to-flags convention as
[`Docker`](https://Karthik777.github.io/fastops/core.html#docker).

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L20"
target="_blank" style="float:right; font-size:smaller">source</a>

### Multipass

``` python

def Multipass(
    args:VAR_POSITIONAL, kwargs:VAR_KEYWORD
):

```

*Wrap multipass CLI: **getattr** dispatches subcommands, kwargs become
flags*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L16"
target="_blank" style="float:right; font-size:smaller">source</a>

### callmultipass

``` python

def callmultipass(
    args:VAR_POSITIONAL
):

```

*Run a multipass CLI command, return stdout.*

## cloud_init_yaml

Generates a `#cloud-config` YAML string for Multipass `--cloud-init`.
When `docker=True` (default) it installs Docker via `get.docker.com`.

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L27"
target="_blank" style="float:right; font-size:smaller">source</a>

### cloud_init_yaml

``` python

def cloud_init_yaml(
    docker:bool=True, packages:NoneType=None, cmds:NoneType=None
)->str:

```

*Generate cloud-init YAML for a Multipass VM*

``` python
init = cloud_init_yaml()
assert '#cloud-config' in init
assert 'get.docker.com' in init
assert 'usermod' in init
print('cloud_init_yaml() default OK')

init2 = cloud_init_yaml(docker=False, packages=['git', 'vim'], cmds=['echo hello'])
assert 'get.docker.com' not in init2
assert '  - git' in init2
assert 'echo hello' in init2
print('cloud_init_yaml() custom OK')

print(init)
```

## VM helpers

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L48"
target="_blank" style="float:right; font-size:smaller">source</a>

### launch

``` python

def launch(
    name, image:str='22.04', cpus:int=1, memory:str='1G', disk:str='10G', cloud_init:NoneType=None,
    mounts:NoneType=None
):

```

*Launch a Multipass VM. cloud_init can be YAML string or path to
existing file.*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L90"
target="_blank" style="float:right; font-size:smaller">source</a>

### transfer

``` python

def transfer(
    src, dst
)->None:

```

*Transfer files to/from a Multipass VM. Use “vmname:/path” for VM
paths.*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L85"
target="_blank" style="float:right; font-size:smaller">source</a>

### delete

``` python

def delete(
    name, purge:bool=True
)->None:

```

*Delete a Multipass VM.*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L81"
target="_blank" style="float:right; font-size:smaller">source</a>

### exec\_

``` python

def exec_(
    name, cmd:VAR_POSITIONAL
)->str:

```

*Run a command in a Multipass VM.*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L76"
target="_blank" style="float:right; font-size:smaller">source</a>

### vm_ip

``` python

def vm_ip(
    name
)->str:

```

*Get the IPv4 address of a Multipass VM.*

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L70"
target="_blank" style="float:right; font-size:smaller">source</a>

### vms

``` python

def vms(
    running:bool=False
)->list:

```

*List Multipass VM names. running=True filters to Running state.*

``` python
# Test vms() - runs without error
try:
    result = vms()
    assert isinstance(result, list)
    print(f'vms() OK: {result}')
except Exception as e:
    print(f'multipass not available: {e}')

# Test vm_ip() error path on a non-existent VM
try: vm_ip('nonexistent-vm-dockr-test')
except subprocess.CalledProcessError: print('vm_ip() error path OK')
except Exception as e: print(f'Other error (multipass not installed?): {e}')
```

------------------------------------------------------------------------

<a
href="https://github.com/Karthik777/fastops/blob/main/fastops/multipass.py#L95"
target="_blank" style="float:right; font-size:smaller">source</a>

### launch_docker_vm

``` python

def launch_docker_vm(
    name, image:str='22.04', cpus:int=2, memory:str='2G', disk:str='20G', packages:NoneType=None,
    mounts:NoneType=None
)->str:

```

*Launch a Multipass VM with Docker pre-installed. Convenience wrapper
for cloud_init_yaml + launch.*
